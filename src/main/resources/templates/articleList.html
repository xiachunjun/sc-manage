<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta charset="utf-8" />
<title>每日信息</title>

<meta name="description" content="overview &amp; stats" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<#include "/parts/common-css.html"/>
<link rel="stylesheet" href="/static/assets/css/bootstrap-datepicker3.min.css" />

</head>
<body class="no-skin">
	<#include "/parts/header.html"/>
	<div class="main-container ace-save-state" id="main-container">
		<script type="text/javascript">
			try {
				ace.settings.loadState('main-container')
			} catch (e) {}
		</script>

		<#include "/parts/asider.html"/>
		<div class="main-content">
			<div class="main-content-inner">
				<div class="breadcrumbs ace-save-state">
					<div class="row">
						<div class="col-sm-12" style="font-size: 13px;padding-left: 20px;">
							<div class="col-sm-6 pull-left">
								<span>当前位置</span> > <span>责任晒板</span> > <span>责任清单</span>
							</div>
							<div class="col-sm-6 text-right" style="padding-right: 20px;">
								<button class="btn btn-white radius-4" onclick="window.location.href='/index'">返回</button>
							</div>
						</div>
					</div>
				</div>
				<div class="page-content">
					<div class="row">
						<div class="col-xs-12">
							<div class="row">
								<div class="space-6"></div>
								<div class="col-sm-12">
									<div class="row">
										<div class="">
											<div class="widget-box transparent">
												<div class="widget-header">
													<div class="widget-toolbar no-border" style="float: left;">
														<ul class="nav nav-tabs" id="recent-tab">
															<li class="active"><a data-toggle="tab" href="#task-tab">全部信息</a></li>

															<li><a data-toggle="tab" href="#member-tab">待审批信息</a></li>

															<li><a data-toggle="tab" href="#comment-tab">编制信息</a></li>
														</ul>
													</div>
												</div>
												<div class="widget-body">
													<div class="widget-main padding-4">
														<div class="tab-content padding-8">
															<div id="task-tab" class="tab-pane active">
																<h5 class="">2018-1-1</h5>
																<ul id="tasks" class="item-list">
																	<li class="item-red bd-left-color"><label class="inline"><span class="cursor-pointer">xxx大会通知</span></label>
																		<div class="pull-right">
																			<div class="a-decoration-none">
																				<span class="padding-right-1">内部</span> <a class="padding-right-1" href="#">下载</a>
																			</div>
																		</div></li>
																	<li class="item-red bd-left-color"><label class="inline"><span class="cursor-pointer">xxx大会通知</span></label>
																		<div class="pull-right">
																			<div class="a-decoration-none">
																				<span class="padding-right-1">内部</span> <a class="padding-right-1" href="#">下载</a>
																			</div>
																		</div></li>
																	<li class="item-red bd-left-color"><label class="inline"><span class="cursor-pointer">xxx大会通知</span></label>
																		<div class="pull-right">
																			<div class="a-decoration-none">
																				<span class="padding-right-1">内部</span> <a class="padding-right-1" href="#">下载</a>
																			</div>
																		</div></li>
																</ul>


																<h5 class="">2018-1-1</h5>
																<ul id="tasks" class="item-list">
																	<li class="item-red bd-left-color"><label class="inline"><span class="cursor-pointer">xxx大会通知</span></label>
																		<div class="pull-right">
																			<div class="a-decoration-none">
																				<span class="padding-right-1">内部</span> <a class="padding-right-1" href="#">下载</a>
																			</div>
																		</div></li>
																	<li class="item-red bd-left-color"><label class="inline"><span class="cursor-pointer">xxx大会通知</span></label>
																		<div class="pull-right">
																			<div class="a-decoration-none">
																				<span class="padding-right-1">内部</span> <a class="padding-right-1" href="#">下载</a>
																			</div>
																		</div></li>
																	<li class="item-red bd-left-color"><label class="inline"><span class="cursor-pointer">xxx大会通知</span></label>
																		<div class="pull-right">
																			<div class="a-decoration-none">
																				<span class="padding-right-1">内部</span> <a class="padding-right-1" href="#">下载</a>
																			</div>
																		</div></li>
																</ul>



																<h5 class="">2018-1-1</h5>
																<ul id="tasks" class="item-list">
																	<li class="item-red bd-left-color"><label class="inline"><span class="cursor-pointer">xxx大会通知</span></label>
																		<div class="pull-right">
																			<div class="a-decoration-none">
																				<span class="padding-right-1">内部</span> <a class="padding-right-1" href="#">下载</a>
																			</div>
																		</div></li>
																	<li class="item-red bd-left-color"><label class="inline"><span class="cursor-pointer">xxx大会通知</span></label>
																		<div class="pull-right">
																			<div class="a-decoration-none">
																				<span class="padding-right-1">内部</span> <a class="padding-right-1" href="#">下载</a>
																			</div>
																		</div></li>
																	<li class="item-red bd-left-color"><label class="inline"><span class="cursor-pointer">xxx大会通知</span></label>
																		<div class="pull-right">
																			<div class="a-decoration-none">
																				<span class="padding-right-1">内部</span> <a class="padding-right-1" href="#">下载</a>
																			</div>
																		</div></li>
																</ul>
															</div>

															<div id="member-tab" class="tab-pane">
																<div class="clearfix">

																	<table id="tfhover" class="tftable" border="1">
																		<tr>
																			<th>序号</th>
																			<th>日期</th>
																			<th>标题</th>
																			<th>联系人</th>
																			<th>签发人</th>
																			<th>操作</th>
																		</tr>
																		<tr>
																			<td>1</td>
																			<td>2017-12-11</td>
																			<td>大标题</td>
																			<td>zhangsan</td>
																			<td>lisi</td>
																			<td><a href="#">下载</a></td>
																		</tr>
																		<tr>
																			<td>2</td>
																			<td>2018-1-1</td>
																			<td>小标题</td>
																			<td>zhangsan</td>
																			<td></td>
																			<td>签发</td>
																		</tr>
																		<tr>
																			<td>3</td>
																			<td>2018-1-1</td>
																			<td>小标题1</td>
																			<td></td>
																			<td></td>
																			<td></td>
																		</tr>
																	</table>
																</div>

															</div>
															<!-- /.#member-tab -->

															<div id="comment-tab" class="tab-pane">
																<div class="row">
																	<div class="space-6"></div>
																	<div class="col-sm-12">
																		<form id="addBylawsForm" class="form-horizontal" role="form" onsubmit="return false;">
																			<div class="form-group">
																				<label class="col-sm-4 control-label no-padding-right" for="bylawsName">信息标题</label>
																				<div class="col-sm-8">
																					<input type="text" id="bylawsName" name="bylawsName" placeholder="输入信息标题" class="col-xs-10 col-sm-5" />
																				</div>
																			</div>
																			<div class="form-group">
																				<label class="col-sm-4 control-label no-padding-right" for="artTime">信息时间</label>
																				<div class="col-sm-8">
																					<input class="col-xs-10 col-sm-5 date-picker" readonly="readonly" id="artTime" name="artTime" type="text" data-date-format="yyyy-mm-dd" placeholder="输入发文时间" />
																				</div>
																			</div>


																			<div class="form-group">
																				<label class="col-sm-4 control-label no-padding-right" for="linkUser">联系人</label>
																				<div class="col-sm-8">
																					<select class="col-xs-10 col-sm-5" id="linkUser" name="linkUser">
																					</select>
																				</div>
																			</div>

																			<div class="form-group">
																				<label class="col-sm-4 control-label no-padding-right" for="bylawsName">联系人手机</label>
																				<div class="col-sm-8">
																					<input type="text" id="bylawsName" name="bylawsName" placeholder="输入联系人手机" class="col-xs-10 col-sm-5" />
																				</div>
																			</div>
																			<div class="form-group">
																				<label class="col-sm-4 control-label no-padding-right" for="signUser">签发人</label>
																				<div class="col-sm-8">
																					<select class="col-xs-10 col-sm-5" id="signUser" name="signUser">

																					</select>
																				</div>
																			</div>

																			<div class="form-group">
																				<label class="col-sm-4 control-label no-padding-right" for="secrecyLevel">密级</label>
																				<div class="col-sm-8">
																					<select class="col-xs-10 col-sm-5" id="secrecyLevel" name="secrecyLevel">
																						<option></option>
																						<option value="FM">非密</option>
																						<option value="NB">内部</option>
																						<option value="MM">秘密</option>
																						<option value="JM">机密</option>
																					</select>
																				</div>
																			</div>

																			<div class="form-group">
																				<label class="col-sm-4 control-label no-padding-right" for="bylawsName">信息内容</label>
																				<div class="col-sm-8"></div>
																			</div>
																			<div class="form-group">
																				<div class="col-sm-offset-1 col-sm-10">
																					<!-- <textarea id="textAre" rows="10" style="width: 100%"></textarea> -->
																					<div class="wysiwyg-editor" id="editor1"></div>
																				</div>
																			</div>
																			<div class="form-group">

																				<div class="form-group">
																					<div class="col-sm-offset-5">
																						<button class="btn btn-primary radius-4" onclick="">保存</button>
																						<button class="btn btn-primary radius-4">重置</button>
																					</div>
																				</div>
																		</form>
																	</div>
																</div>

															</div>
														</div>
													</div>
												</div>
											</div>
										</div>

									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<#include "/parts/footer.html"/>
	</div>
	<#include "/parts/common-js.html"/>
	<script src="/static/assets/js/bootstrap-datepicker.min.js"></script>
	<script src="/static/assets/js/markdown.min.js"></script>
	<script src="/static/assets/js/bootstrap-markdown.min.js"></script>
	<script src="/static/assets/js/jquery.hotkeys.index.min.js"></script>
	<script src="/static/assets/js/bootstrap-wysiwyg.min.js"></script>
	<script src="/static/assets/js/bootbox.js"></script>
	<script src="/static/assets/js/ace-elements.min.js"></script>
	<script type="text/javascript">
		jQuery(function($) {
			function showErrorAlert(reason, detail) {
				var msg = '';
				if (reason === 'unsupported-file-type') {
					msg = "Unsupported format " + detail;
				} else {
					console.log("error uploading file", reason, detail);
				}
			}
	
			$('#editor1').ace_wysiwyg({
				toolbar : [
					'font',
					null,
					'fontSize',
					null,
					{
						name : 'bold',
						className : 'btn-info'
					},
					{
						name : 'italic',
						className : 'btn-info'
					},
					{
						name : 'strikethrough',
						className : 'btn-info'
					},
					{
						name : 'underline',
						className : 'btn-info'
					},
					null,
					{
						name : 'insertunorderedlist',
						className : 'btn-success'
					},
					{
						name : 'insertorderedlist',
						className : 'btn-success'
					},
					{
						name : 'outdent',
						className : 'btn-purple'
					},
					{
						name : 'indent',
						className : 'btn-purple'
					},
					null,
					{
						name : 'justifyleft',
						className : 'btn-primary'
					},
					{
						name : 'justifycenter',
						className : 'btn-primary'
					},
					{
						name : 'justifyright',
						className : 'btn-primary'
					},
					{
						name : 'justifyfull',
						className : 'btn-inverse'
					},
					null,
					{
						name : 'createLink',
						className : 'btn-pink'
					},
					{
						name : 'unlink',
						className : 'btn-pink'
					},
					null,
					{
						name : 'insertImage',
						className : 'btn-success'
					},
					null,
					'foreColor',
					null,
					{
						name : 'undo',
						className : 'btn-grey'
					},
					{
						name : 'redo',
						className : 'btn-grey'
					}
				],
				'wysiwyg' : {
					fileUploadError : showErrorAlert
				}
			}).prev().addClass('wysiwyg-style1');
	
			$('.date-picker').datepicker({
				autoclose : true,
				todayHighlight : true
			})
				.next().on(ace.click_event, function() {
				$(this).prev().focus();
			});
		});
	
	
		function queryData() {
			$.ajax({
				type : 'POST',
				url : '/article/queryAll',
				data : null,
				headers : {
					'Content-Type' : 'application/x-www-form-urlencoded'
				},
				success : function(data) {
					var resultCode = data.resultCode;
					var dataMap = data.dataMap;
					if (resultCode == '000000' & dataMap != null) {
						dataListRender(dataMap);
					} else {
						alert("查询每日信息列表失败！");
					}
				},
				dataType : 'json',
				error : function(data) {
					alert("查询每日信息列表异常-" + JSON.stringify(data));
				}
			});
		}
	
		function dataListRender(dataMap) {
			var ht = "<tr><th>序号</th><th>日期</th><th>标题</th><th>联系人</th><th>签发人</th><th>操作</th></tr>";
			var deptDutyList = dataMap.deptDutyList;
			if (deptDutyList && deptDutyList.length > 0) {
				var indexNo = 1;
				for (var i = 0; i < deptDutyList.length; i++) {
					var deptDutyLevel1 = deptDutyList[i];
					var deptDutyLevel2 = deptDutyLevel1.two;
					if (deptDutyLevel2 && deptDutyLevel2.length > 0) {
						deptDutyLevel2.forEach(function(value, index, deptDutyLevel2) {
	
							ht = ht + "<tr class='center'><td>" + (indexNo++) + "</td>";
							if (0 === index) {
								ht = ht + "<td rowspan='" + deptDutyLevel2.length + "'>" + deptDutyLevel1.one + "</td>";
							}
							ht = ht + "<td>" + value + "</td>";
						});
	
					} else {
						ht = ht + "<tr class='center'><td>" + (indexNo++) + "</td>";
						ht = ht + "<td>" + deptDutyLevel1.one + "</td>";
						ht = ht + "<td>&nbsp;</td>";
					}
				}
			}
			$("#tfhover").html(ht);
		}
	
		function renderUser() {
			$.ajax({
				type : 'POST',
				url : '/user/query/list',
				data :  JSON.stringify({}),
				headers : {
					'Content-Type' : 'application/json'
				},
				success : function(data) {
					var resultCode = data.resultCode;
					var dataMap = data.dataMap;
					if (resultCode == '000000' & dataMap != null) {
						var ht = "<option></option>";
						var userList = dataMap.userList;
						if (userList && userList.length > 0) {
							for (i = 0; i < userList.length; i++) {
								ht = ht + "<option value='" + userList[i].userCode + "'>" + userList[i].userLoginName + "</option>";
							}
							$("#linkUser").html(ht);
							$("#signUser").html(ht);
						}
					} else {
						alert("获取信息异常-" + JSON.stringify(data));
					}
				},
				dataType : 'json',
				error : function(data) {
					alert("获取信息异常-" + JSON.stringify(data));
				}
			});
		}
		
		renderUser();
	</script>
</body>
</html>
